<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Booking Ruangan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
  <div class="container mt-5">
      <!-- Debug -->
      <div style="display:none;">
          <!-- Cetak URL untuk debug -->
          <p>Current URL: {{ request.url }}</p>
      </div>

      <!-- SweetAlert2 Pop-Up -->
      <script>
        // Cek jika ada parameter 'success' di URL
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('success')) {
            Swal.fire({
                title: 'Berhasil!',
                text: 'Form Anda berhasil terkirim!',
                icon: 'success',
                confirmButtonText: 'OK',
            }).then(() => {
                // Redirect ke halaman index.html setelah klik OK
                window.location.href = 'http://127.0.0.1:5000/';
            });
        }
      </script>
    

      {% if error %}
      <script>
          Swal.fire({
              title: 'Gagal!',
              text: '{{ error }}',
              icon: 'error',
              confirmButtonText: 'OK'
          });
      </script>
      {% endif %}

      <!-- Form -->
      <h1>Booking Ruangan <span style='color:red'>{{ nama_ruang }}</span></h1>
      <form method="POST" enctype="multipart/form-data">
          <div class="mb-3">
              <label for="id_ruang" class="form-label">Nama Ruangan</label>
              <input type="text" class="form-control" id="nama_ruang" name="nama_ruang" value="{{ nama_ruang }}" readonly>
          </div>
          <div class="mb-3">
              <input type="hidden" id="id_ruang" name="id_ruang" value="{{ id_ruang }}">
          </div>
          <div class="mb-3">
              <label for="nama_peminjam" class="form-label">Nama Peminjam</label>
              <input type="text" class="form-control" id="nama_peminjam" name="nama_peminjam" required>
          </div>
          <div class="mb-3">
              <label for="tanggal_mulai" class="form-label">Tanggal Mulai</label>
              <input type="date" class="form-control" id="tanggal_mulai" name="tanggal_mulai" required>
          </div>
          <div class="mb-3">
              <label for="tanggal_selesai" class="form-label">Tanggal Selesai</label>
              <input type="date" class="form-control" id="tanggal_selesai" name="tanggal_selesai" required>
          </div>
          <div class="mb-3">
              <label for="file_proposal" class="form-label">Unggah Proposal</label>
              <input type="file" class="form-control" id="file_proposal" name="file_proposal" required>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
      </form>
  </div>
</body>

</html>
